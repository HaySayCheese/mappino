{"version":3,"sources":["ng-tiny-scrollbar.js"],"names":["angular","module","provider","this","defaults","axis","wheel","wheelSpeed","wheelLock","scrollInvert","trackSize","thumbSize","alwaysVisible","autoUpdate","$get","directive","$window","$timeout","$parse","$animate","scrollbar","restrict","transclude","template","controller","$scope","$element","$attrs","ensureContentPosition","self","contentRatio","contentPosition","contentSize","viewportSize","setEvents","hasTouchEvents","$viewport","on","touchstart","$thumb","start","$scrollbar","drag","element","resize","options","wheelEvent","MutationObserver","updateTimer","recentWidth","$overview","offsetWidth","recentHeight","offsetHeight","observer","mutations","cancel","update","observe","childList","subtree","characterData","attributes","event","evntObj","originalEvent","touches","length","stopPropagation","$body","addClass","mousePosition","isHorizontal","pageX","pageY","thumbPosition","parseInt","css","posiLabel","$document","touchdrag","end","restoreVisibilityAfterWheel","removeClass","deltaDir","toUpperCase","delta","X","deltaX","Y","deltaY","deltaMode","wheelDelta","wheelDeltaX","wheelSpeedDelta","Math","min","max","dispatchEvent","moveEvent","trackRatio","preventDefault","mousePositionNew","thumbPositionDelta","type","thumbPositionNew","off","extend","_defaults","document","querySelectorAll","undefined","onmousewheel","sizeLabel","sizeLabelCap","charAt","slice","toLowerCase","createEvent","initEvent","initialize","scrollTo","prop","toggleClass","isNaN","then","$digest","cleanup","link","scope","iElement","iAttrs","position","getComputedStyle","getPropertyValue"],"mappings":"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","file":"ng-tiny-scrollbar.js","sourcesContent":["/*!\n Copyright 2014 Vadim Kazakov\n Adapted from source by Maarten Baijs\n\n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the\n \"Software\"), to deal in the Software without restriction, including\n without limitation the rights to use, copy, modify, merge, publish,\n distribute, sublicense, and/or sell copies of the Software, and to\n permit persons to whom the Software is furnished to do so, subject to\n the following conditions:\n\n The above copyright notice and this permission notice shall be\n included in all copies or substantial portions of the Software.\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n */\n\n'use strict';\n\nangular.module('ngTinyScrollbar', [])\n    .provider('scrollbar', function () {\n\n        this.defaults = {\n            axis: 'y', // Vertical or horizontal scrollbar? ( x || y ).\n            wheel: true, // Enable or disable the mousewheel;\n            wheelSpeed: 40, // How many pixels must the mouswheel scroll at a time.\n            wheelLock: true, // Lock default scrolling window when there is no more content.\n            scrollInvert: false, // Enable invert style scrolling\n            trackSize: false, // Set the size of the scrollbar to auto or a fixed number.\n            thumbSize: false, // Set the size of the thumb to auto or a fixed number.\n            alwaysVisible: true, // Set to false to hide the scrollbar if not being used\n            autoUpdate: false    // Autoupdate the scrollbar if DOM changes. Needs MutationObserver or a polyfill to be available\n        };\n\n        this.$get = function () {\n            return this;\n        };\n    })\n    .directive('scrollbar', ['$window', '$timeout', '$parse', '$animate', 'scrollbar', function($window, $timeout, $parse, $animate, scrollbar) {\n        return {\n            restrict: 'A',\n            transclude: true,\n            template: '<div class=\"scroll-bar\"><div class=\"scroll-thumb\"></div></div><div class=\"scroll-viewport\"><div class=\"scroll-overview\" ng-transclude></div></div>',\n            controller: function($scope, $element, $attrs) {\n\n                var options = $attrs.scrollbar;\n                if (options) {\n                    options = $parse(options)($scope);\n                } else {\n                    options = {};\n                }\n                this.options = angular.extend({}, scrollbar.defaults, options);\n                this._defaults = scrollbar.defaults;\n\n                var self = this,\n                    $body = angular.element(document.querySelectorAll('body')[0]),\n                    $document = angular.element(document),\n                    $viewport = angular.element($element[0].querySelectorAll('.scroll-viewport')[0]),\n                    $overview = angular.element($element[0].querySelectorAll('.scroll-overview')[0]),\n                    $scrollbar = angular.element($element[0].querySelectorAll('.scroll-bar')[0]),\n                    $thumb = angular.element($element[0].querySelectorAll('.scroll-thumb')[0]),\n                    mousePosition = 0,\n                    isHorizontal = this.options.axis === 'x',\n                    hasTouchEvents = ('ontouchstart' in $window),\n                    wheelEvent = (\"onwheel\" in document ? \"wheel\" : // Modern browsers support \"wheel\"\n                        document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n                            \"DOMMouseScroll\"), // let's assume that remaining browsers are older Firefox\n                    sizeLabel = isHorizontal ? 'width' : 'height',\n                    sizeLabelCap = sizeLabel.charAt(0).toUpperCase() + sizeLabel.slice(1).toLowerCase(),\n                    posiLabel = isHorizontal ? 'left' : 'top',\n                    moveEvent = document.createEvent('HTMLEvents'),\n                    restoreVisibilityAfterWheel;\n\n                moveEvent.initEvent('move', true, true);\n                this.contentPosition = 0;\n                this.viewportSize = 0;\n                this.contentSize = 0;\n                this.contentRatio = 0;\n                this.trackSize = 0;\n                this.trackRatio = 0;\n                this.thumbSize = 0;\n                this.thumbPosition = 0;\n\n                this.initialize = function() {\n                    if (!this.options.alwaysVisible) {\n                        $scrollbar.css('opacity', 0);\n                    }\n                    self.update();\n                    setEvents();\n                    return self;\n                };\n\n                this.update = function(scrollTo) {\n                    this.viewportSize = $viewport.prop('offset'+ sizeLabelCap);\n                    this.contentSize = $overview.prop('scroll'+ sizeLabelCap);\n                    this.contentRatio = this.viewportSize / this.contentSize;\n                    this.trackSize = this.options.trackSize || this.viewportSize;\n                    this.thumbSize = Math.min(this.trackSize, Math.max(0, (this.options.thumbSize || (this.trackSize * this.contentRatio))));\n                    this.trackRatio = this.options.thumbSize ? (this.contentSize - this.viewportSize) / (this.trackSize - this.thumbSize) : (this.contentSize / this.trackSize);\n                    mousePosition = $scrollbar.prop('offsetTop');\n\n                    $scrollbar.toggleClass('disable', this.contentRatio >= 1 || isNaN(this.contentRatio));\n\n                    if (!this.options.alwaysVisible && this.contentRatio < 1 && this.viewportSize > 0) {\n                        //flash the scrollbar when update happens\n                        $animate.addClass($scrollbar, 'visible').then(function() {\n                            $animate.removeClass($scrollbar, 'visible');\n                            $scope.$digest();\n                        });\n                    }\n\n                    if (scrollTo != null)  {\n                        switch (scrollTo) {\n                            case 'bottom':\n                                this.contentPosition = this.contentSize - this.viewportSize;\n                                break;\n                            default:\n                                this.contentPosition = parseInt(scrollTo, 10) || 0;\n                        }\n                    }\n\n                    ensureContentPosition();\n                    $thumb.css(posiLabel, self.contentPosition / self.trackRatio + 'px');\n                    $scrollbar.css(sizeLabel, self.trackSize + 'px');\n                    $thumb.css(sizeLabel, self.thumbSize + 'px');\n                    $overview.css(posiLabel, -self.contentPosition + 'px');\n\n                    return this;\n                };\n\n                function ensureContentPosition() {\n                    // if scrollbar is on, ensure the bottom of the content does not go above the bottom of the viewport\n                    if (self.contentRatio <= 1 && self.contentPosition > self.contentSize - self.viewportSize) {\n                        self.contentPosition = self.contentSize - self.viewportSize;\n                    }\n                    // if scrollbar is off, ensure the top of the content does not go below the top of the viewport\n                    else if (self.contentRatio > 1 && self.contentPosition > 0) {\n                        self.contentPosition = 0;\n                    }\n                }\n\n                function setEvents() {\n\n                    if(hasTouchEvents) {\n                        $viewport.on('touchstart', touchstart);\n                    }\n                    $thumb.on('mousedown', start);\n                    $scrollbar.on('mousedown', drag);\n\n                    angular.element($window).on('resize', resize);\n\n                    if(self.options.wheel) {\n                        $element.on(wheelEvent, wheel);\n                    }\n\n                    if (self.options.autoUpdate && MutationObserver) {\n                        (function () {\n                            var recentWidth = $overview[0].offsetWidth,\n                                recentHeight = $overview[0].offsetHeight,\n                                updateTimer;\n\n                            // check DOM content update\n                            var observer = new MutationObserver(function (mutations) {\n                                // Render scrollbar only with $overview dimension changes, once per digest cycle\n                                if (recentWidth !== $overview[0].offsetWidth ||\n                                    recentHeight !== $overview[0].offsetHeight) {\n                                    $timeout.cancel(updateTimer);\n                                    updateTimer = $timeout(function () {\n                                        recentWidth = $overview[0].offsetWidth;\n                                        recentHeight = $overview[0].offsetHeight;\n                                        self.update();\n                                    });\n                                }\n                            });\n\n                            observer.observe($element[0], {\n                                childList: true,\n                                subtree: true,\n                                characterData: true,\n                                attributes: true\n                            });\n                        })();\n                    }\n                }\n\n                function resize() {\n                    self.update();\n                }\n\n                function touchstart(event) {\n                    var evntObj = (event && event.originalEvent) || event || $window.event;\n                    if (1 === evntObj.touches.length) {\n                        event.stopPropagation();\n                        start(evntObj.touches[0]);\n                    }\n                }\n\n                function start(event) {\n                    $body.addClass('scroll-no-select');\n                    $element.addClass('scroll-no-select');\n\n                    if (!self.options.alwaysVisible) {\n                        $scrollbar.addClass('visible');\n                    }\n                    mousePosition = isHorizontal ? event.pageX : event.pageY;\n                    self.thumbPosition = parseInt($thumb.css(posiLabel), 10) || 0;\n\n                    if(hasTouchEvents) {\n                        $document.on('touchmove', touchdrag);\n                        $document.on('touchend', end);\n                    }\n                    $document.on('mousemove', drag);\n                    $document.on('mouseup', end);\n                    $thumb.on('mouseup', end);\n                }\n\n                function wheel(event) {\n\n                    if(self.contentRatio >= 1) {\n                        return;\n                    }\n\n                    if (!self.options.alwaysVisible) {\n                        //cancel removing visibility if wheel event is triggered before the timeout\n                        if (restoreVisibilityAfterWheel) {\n                            $timeout.cancel(restoreVisibilityAfterWheel);\n                        }\n                        $scrollbar.addClass('visible');\n\n                        restoreVisibilityAfterWheel = $timeout(function() {\n                            $scrollbar.removeClass('visible');\n                        }, 100);\n                    }\n\n\n                    var evntObj = (event && event.originalEvent) || event || $window.event,\n                        deltaDir = self.options.axis.toUpperCase(),\n                        delta = {\n                            X: evntObj.deltaX,\n                            Y: evntObj.deltaY\n                        },\n                        wheelSpeed = evntObj.deltaMode == 0 ? self.options.wheelSpeed : 1;\n\n                    if (self.options.scrollInvert) {\n                        wheelSpeed *= -1;\n                    }\n\n                    if (wheelEvent === 'mousewheel') {\n                        delta.Y = -1 * evntObj.wheelDelta / 40;\n                        evntObj.wheelDeltaX && ( delta.X = -1 * evntObj.wheelDeltaX / 40 );\n                    }\n                    delta.X *= -1 / wheelSpeed;\n                    delta.Y *= -1 / wheelSpeed;\n\n                    var wheelSpeedDelta = delta[deltaDir];\n\n                    self.contentPosition -= wheelSpeedDelta * self.options.wheelSpeed;\n                    self.contentPosition = Math.min((self.contentSize - self.viewportSize), Math.max(0, self.contentPosition));\n\n                    $element[0].dispatchEvent(moveEvent);\n\n                    ensureContentPosition();\n                    $thumb.css(posiLabel, self.contentPosition / self.trackRatio + 'px');\n                    $overview.css(posiLabel, -self.contentPosition + 'px');\n\n                    if(self.options.wheelLock || (self.contentPosition !== (self.contentSize - self.viewportSize) && self.contentPosition !== 0)) {\n                        evntObj.preventDefault();\n                    }\n                }\n\n                function touchdrag(event) {\n                    var evntObj = (event && event.originalEvent) || event || $window.event;\n                    if (1 === evntObj.touches.length) {\n                        event.preventDefault();\n                        drag(evntObj.touches[0]);\n                    }\n                }\n\n                function drag(event) {\n\n                    if(self.contentRatio >= 1) {\n                        return;\n                    }\n\n                    var mousePositionNew = isHorizontal ? event.pageX : event.pageY,\n                        thumbPositionDelta = mousePositionNew - mousePosition;\n\n                    if((self.options.scrollInvert && event.type === 'mousemove') ||\n                        (event.type !== 'mousemove' && !self.options.scrollInvert))\n                    {\n                        thumbPositionDelta = mousePosition - mousePositionNew;\n                    }\n                    var thumbPositionNew = Math.min((self.trackSize - self.thumbSize), Math.max(0, self.thumbPosition + thumbPositionDelta));\n                    self.contentPosition = thumbPositionNew * self.trackRatio;\n\n                    $element[0].dispatchEvent(moveEvent);\n\n                    ensureContentPosition();\n                    $thumb.css(posiLabel, thumbPositionNew + 'px');\n                    $overview.css(posiLabel, -self.contentPosition + 'px');\n                }\n\n                function end() {\n\n                    $body.removeClass('scroll-no-select');\n                    $element.removeClass('scroll-no-select');\n                    if (!self.options.alwaysVisible) {\n                        $scrollbar.removeClass('visible');\n                    }\n\n                    $document.off('mousemove', drag);\n                    $document.off('mouseup', end);\n                    $thumb.off('mouseup', end);\n                    $document.off('touchmove', touchdrag);\n                    $document.off('ontouchend', end);\n                }\n\n                this.cleanup = function() {\n                    $viewport.off('touchstart', touchstart);\n                    $thumb.off('mousedown', start);\n                    $scrollbar.off('mousedown', drag);\n                    angular.element($window).off('resize', resize);\n                    $element.off(wheelEvent, wheel);\n                    //ensure scrollbar isn't activated\n                    self.options.alwaysVisible = true;\n                    end();\n                };\n\n            },\n            link: function(scope, iElement, iAttrs, controller) {\n                var position = $window.getComputedStyle(iElement[0]).getPropertyValue('position');\n                if (position !== 'relative' && position !== 'absolute') {\n                    iElement.css('position', 'relative');\n                }\n                controller.initialize();\n                iElement.on('$destroy', function() {\n                    controller.cleanup();\n                });\n            }\n        };\n    }]);"],"sourceRoot":"/source/"}