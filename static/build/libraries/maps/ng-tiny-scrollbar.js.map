{"version":3,"sources":["ng-tiny-scrollbar.js"],"names":["angular","module","directive","$window","$timeout","$parse","$animate","restrict","transclude","template","controller","$scope","$element","$attrs","ensureContentPosition","self","contentRatio","contentPosition","contentSize","viewportSize","setEvents","hasTouchEvents","$viewport","on","touchstart","$thumb","start","$scrollbar","drag","element","resize","options","wheel","wheelEvent","autoUpdate","MutationObserver","observer","mutations","update","observe","childList","subtree","characterData","attributes","event","evntObj","originalEvent","touches","length","stopPropagation","$body","addClass","alwaysVisible","mousePosition","isHorizontal","pageX","pageY","thumbPosition","parseInt","css","posiLabel","$document","touchdrag","end","restoreVisibilityAfterWheel","cancel","removeClass","deltaDir","axis","toUpperCase","delta","X","deltaX","Y","deltaY","wheelSpeed","deltaMode","scrollInvert","wheelDelta","wheelDeltaX","wheelSpeedDelta","Math","min","max","dispatchEvent","moveEvent","trackRatio","$overview","wheelLock","preventDefault","mousePositionNew","thumbPositionDelta","type","thumbPositionNew","trackSize","thumbSize","off","defaults","scrollbar","this","extend","_defaults","document","querySelectorAll","undefined","onmousewheel","sizeLabel","sizeLabelCap","charAt","slice","toLowerCase","createEvent","initEvent","initialize","scrollTo","prop","toggleClass","isNaN","then","$digest","cleanup","link","scope","iElement","iAttrs","position","getComputedStyle","getPropertyValue"],"mappings":"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","file":"ng-tiny-scrollbar.js","sourcesContent":["/*!\n Copyright 2014 Vadim Kazakov\n Adapted from source by Maarten Baijs\n\n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the\n \"Software\"), to deal in the Software without restriction, including\n without limitation the rights to use, copy, modify, merge, publish,\n distribute, sublicense, and/or sell copies of the Software, and to\n permit persons to whom the Software is furnished to do so, subject to\n the following conditions:\n\n The above copyright notice and this permission notice shall be\n included in all copies or substantial portions of the Software.\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n */\n\n'use strict';\n\nangular.module('ngTinyScrollbar', [])\n    .directive('scrollbar', ['$window', '$timeout', '$parse', '$animate', function($window, $timeout, $parse, $animate) {\n        return {\n            restrict: 'A',\n            transclude: true,\n            template: '<div class=\"scroll-bar\"><div class=\"scroll-thumb\"></div></div><div class=\"scroll-viewport\"><div class=\"scroll-overview\" ng-transclude></div></div>',\n            controller: function($scope, $element, $attrs) {\n\n                var defaults = {\n                    axis : 'y', // Vertical or horizontal scrollbar? ( x || y ).\n                    wheel : true, // Enable or disable the mousewheel;\n                    wheelSpeed : 40, // How many pixels must the mouswheel scroll at a time.\n                    wheelLock : true, // Lock default scrolling window when there is no more content.\n                    scrollInvert : false, // Enable invert style scrolling\n                    trackSize : false, // Set the size of the scrollbar to auto or a fixed number.\n                    thumbSize : false, // Set the size of the thumb to auto or a fixed number.\n                    alwaysVisible: true, // Set to false to hide the scrollbar if not being used\n                    autoUpdate: false    // Autoupdate the scrollbar if DOM changes. Needs MutationObserver or a polyfill to be available\n                };\n                var options = $attrs.scrollbar;\n                if (options) {\n                    options = $parse(options)($scope);\n                } else {\n                    options = {};\n                }\n                this.options = angular.extend({}, defaults, options);\n                this._defaults = defaults;\n\n                var self = this,\n                    $body = angular.element(document.querySelectorAll('body')[0]),\n                    $document = angular.element(document),\n                    $viewport = angular.element($element[0].querySelectorAll('.scroll-viewport')[0]),\n                    $overview = angular.element($element[0].querySelectorAll('.scroll-overview')[0]),\n                    $scrollbar = angular.element($element[0].querySelectorAll('.scroll-bar')[0]),\n                    $thumb = angular.element($element[0].querySelectorAll('.scroll-thumb')[0]),\n                    mousePosition = 0,\n                    isHorizontal = this.options.axis === 'x',\n                    hasTouchEvents = ('ontouchstart' in $window),\n                    wheelEvent = (\"onwheel\" in document ? \"wheel\" : // Modern browsers support \"wheel\"\n                        document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n                            \"DOMMouseScroll\"), // let's assume that remaining browsers are older Firefox\n                    sizeLabel = isHorizontal ? 'width' : 'height',\n                    sizeLabelCap = sizeLabel.charAt(0).toUpperCase() + sizeLabel.slice(1).toLowerCase(),\n                    posiLabel = isHorizontal ? 'left' : 'top',\n                    moveEvent = document.createEvent('HTMLEvents'),\n                    restoreVisibilityAfterWheel;\n\n                moveEvent.initEvent('move', true, true);\n                this.contentPosition = 0;\n                this.viewportSize = 0;\n                this.contentSize = 0;\n                this.contentRatio = 0;\n                this.trackSize = 0;\n                this.trackRatio = 0;\n                this.thumbSize = 0;\n                this.thumbPosition = 0;\n\n                this.initialize = function() {\n                    if (!this.options.alwaysVisible) {\n                        $scrollbar.css('opacity', 0);\n                    }\n                    self.update();\n                    setEvents();\n                    return self;\n                };\n\n                this.update = function(scrollTo) {\n                    this.viewportSize = $viewport.prop('offset'+ sizeLabelCap);\n                    this.contentSize = $overview.prop('scroll'+ sizeLabelCap);\n                    this.contentRatio = this.viewportSize / this.contentSize;\n                    this.trackSize = this.options.trackSize || this.viewportSize;\n                    this.thumbSize = Math.min(this.trackSize, Math.max(0, (this.options.thumbSize || (this.trackSize * this.contentRatio))));\n                    this.trackRatio = this.options.thumbSize ? (this.contentSize - this.viewportSize) / (this.trackSize - this.thumbSize) : (this.contentSize / this.trackSize);\n                    mousePosition = $scrollbar.prop('offsetTop');\n\n                    $scrollbar.toggleClass('disable', this.contentRatio >= 1 || isNaN(this.contentRatio));\n\n                    if (!this.options.alwaysVisible && this.contentRatio < 1 && this.viewportSize > 0) {\n                        //flash the scrollbar when update happens\n                        $animate.addClass($scrollbar, 'visible').then(function() {\n                            $animate.removeClass($scrollbar, 'visible');\n                            $scope.$digest();\n                        });\n                    }\n\n                    if (scrollTo != null)  {\n                        switch (scrollTo) {\n                            case 'bottom':\n                                this.contentPosition = this.contentSize - this.viewportSize;\n                                break;\n                            default:\n                                this.contentPosition = parseInt(scrollTo, 10) || 0;\n                        }\n                    }\n\n                    ensureContentPosition();\n                    $thumb.css(posiLabel, self.contentPosition / self.trackRatio + 'px');\n                    $scrollbar.css(sizeLabel, self.trackSize + 'px');\n                    $thumb.css(sizeLabel, self.thumbSize + 'px');\n                    $overview.css(posiLabel, -self.contentPosition + 'px');\n\n                    return this;\n                };\n\n                function ensureContentPosition() {\n                    // if scrollbar is on, ensure the bottom of the content does not go above the bottom of the viewport\n                    if (self.contentRatio <= 1 && self.contentPosition > self.contentSize - self.viewportSize) {\n                        self.contentPosition = self.contentSize - self.viewportSize;\n                    }\n                    // if scrollbar is off, ensure the top of the content does not go below the top of the viewport\n                    else if (self.contentRatio > 1 && self.contentPosition > 0) {\n                        self.contentPosition = 0;\n                    }\n                }\n\n                function setEvents() {\n\n                    if(hasTouchEvents) {\n                        $viewport.on('touchstart', touchstart);\n                    }\n                    $thumb.on('mousedown', start);\n                    $scrollbar.on('mousedown', drag);\n\n                    angular.element($window).on('resize', resize);\n\n                    if(self.options.wheel) {\n                        $element.on(wheelEvent, wheel);\n                    }\n\n                    if (self.options.autoUpdate && MutationObserver) {\n                        // check DOM content update\n                        var observer = new MutationObserver(function (mutations) {\n                            self.update();\n                        });\n\n                        observer.observe($element[0], {\n                            childList: true,\n                            subtree: true,\n                            characterData: true,\n                            attributes: true\n                        });\n                    }\n                }\n\n                function resize() {\n                    self.update();\n                }\n\n                function touchstart(event) {\n                    var evntObj = (event && event.originalEvent) || event || $window.event;\n                    if (1 === evntObj.touches.length) {\n                        event.stopPropagation();\n                        start(evntObj.touches[0]);\n                    }\n                }\n\n                function start(event) {\n                    $body.addClass('scroll-no-select');\n                    $element.addClass('scroll-no-select');\n\n                    if (!self.options.alwaysVisible) {\n                        $scrollbar.addClass('visible');\n                    }\n                    mousePosition = isHorizontal ? event.pageX : event.pageY;\n                    self.thumbPosition = parseInt($thumb.css(posiLabel), 10) || 0;\n\n                    if(hasTouchEvents) {\n                        $document.on('touchmove', touchdrag);\n                        $document.on('touchend', end);\n                    }\n                    $document.on('mousemove', drag);\n                    $document.on('mouseup', end);\n                    $thumb.on('mouseup', end);\n                }\n\n                function wheel(event) {\n\n                    if(self.contentRatio >= 1) {\n                        return;\n                    }\n\n                    if (!self.options.alwaysVisible) {\n                        //cancel removing visibility if wheel event is triggered before the timeout\n                        if (restoreVisibilityAfterWheel) {\n                            $timeout.cancel(restoreVisibilityAfterWheel);\n                        }\n                        $scrollbar.addClass('visible');\n\n                        restoreVisibilityAfterWheel = $timeout(function() {\n                            $scrollbar.removeClass('visible');\n                        }, 100);\n                    }\n\n\n                    var evntObj = (event && event.originalEvent) || event || $window.event,\n                        deltaDir = self.options.axis.toUpperCase(),\n                        delta = {\n                            X: evntObj.deltaX,\n                            Y: evntObj.deltaY\n                        },\n                        wheelSpeed = evntObj.deltaMode == 0 ? self.options.wheelSpeed : 1;\n\n                    if (self.options.scrollInvert) {\n                        wheelSpeed *= -1;\n                    }\n\n                    if (wheelEvent === 'mousewheel') {\n                        delta.Y = -1 * evntObj.wheelDelta / 40;\n                        evntObj.wheelDeltaX && ( delta.X = -1 * evntObj.wheelDeltaX / 40 );\n                    }\n                    delta.X *= -1 / wheelSpeed;\n                    delta.Y *= -1 / wheelSpeed;\n\n                    var wheelSpeedDelta = delta[deltaDir];\n\n                    self.contentPosition -= wheelSpeedDelta * self.options.wheelSpeed;\n                    self.contentPosition = Math.min((self.contentSize - self.viewportSize), Math.max(0, self.contentPosition));\n\n                    $element[0].dispatchEvent(moveEvent);\n\n                    ensureContentPosition();\n                    $thumb.css(posiLabel, self.contentPosition / self.trackRatio + 'px');\n                    $overview.css(posiLabel, -self.contentPosition + 'px');\n\n                    if(self.options.wheelLock || (self.contentPosition !== (self.contentSize - self.viewportSize) && self.contentPosition !== 0)) {\n                        evntObj.preventDefault();\n                    }\n                }\n\n                function touchdrag(event) {\n                    var evntObj = (event && event.originalEvent) || event || $window.event;\n                    if (1 === evntObj.touches.length) {\n                        event.preventDefault();\n                        drag(evntObj.touches[0]);\n                    }\n                }\n\n                function drag(event) {\n\n                    if(self.contentRatio >= 1) {\n                        return;\n                    }\n\n                    var mousePositionNew = isHorizontal ? event.pageX : event.pageY,\n                        thumbPositionDelta = mousePositionNew - mousePosition;\n\n                    if((self.options.scrollInvert && event.type === 'mousemove') ||\n                        (event.type !== 'mousemove' && !self.options.scrollInvert))\n                    {\n                        thumbPositionDelta = mousePosition - mousePositionNew;\n                    }\n                    var thumbPositionNew = Math.min((self.trackSize - self.thumbSize), Math.max(0, self.thumbPosition + thumbPositionDelta));\n                    self.contentPosition = thumbPositionNew * self.trackRatio;\n\n                    $element[0].dispatchEvent(moveEvent);\n\n                    ensureContentPosition();\n                    $thumb.css(posiLabel, thumbPositionNew + 'px');\n                    $overview.css(posiLabel, -self.contentPosition + 'px');\n                }\n\n                function end() {\n\n                    $body.removeClass('scroll-no-select');\n                    $element.removeClass('scroll-no-select');\n                    if (!self.options.alwaysVisible) {\n                        $scrollbar.removeClass('visible');\n                    }\n\n                    $document.off('mousemove', drag);\n                    $document.off('mouseup', end);\n                    $thumb.off('mouseup', end);\n                    $document.off('touchmove', touchdrag);\n                    $document.off('ontouchend', end);\n                }\n\n                this.cleanup = function() {\n                    $viewport.off('touchstart', touchstart);\n                    $thumb.off('mousedown', start);\n                    $scrollbar.off('mousedown', drag);\n                    angular.element($window).off('resize', resize);\n                    $element.off(wheelEvent, wheel);\n                    //ensure scrollbar isn't activated\n                    self.options.alwaysVisible = true;\n                    end();\n                };\n\n            },\n            link: function(scope, iElement, iAttrs, controller) {\n                var position = $window.getComputedStyle(iElement[0]).getPropertyValue('position');\n                if (position !== 'relative' && position !== 'absolute') {\n                    iElement.css('position', 'relative');\n                }\n                controller.initialize();\n                iElement.on('$destroy', function() {\n                    controller.cleanup();\n                });\n            }\n        };\n    }]);"],"sourceRoot":"/source/"}