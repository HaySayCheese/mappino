"use strict";angular.module("ngTinyScrollbar",[]).directive("scrollbar",["$window","$timeout","$parse","$animate",function(t,e,o,i){return{restrict:"A",transclude:!0,template:'<div class="scroll-bar"><div class="scroll-thumb"></div></div><div class="scroll-viewport"><div class="scroll-overview" ng-transclude></div></div>',controller:function(n,s,a){function l(){z.contentRatio<=1&&z.contentPosition>z.contentSize-z.viewportSize?z.contentPosition=z.contentSize-z.viewportSize:z.contentRatio>1&&z.contentPosition>0&&(z.contentPosition=0)}function c(){if(M&&P.on("touchstart",u),x.on("mousedown",h),k.on("mousedown",m),angular.element(t).on("resize",r),z.options.wheel&&s.on(E,p),z.options.autoUpdate&&MutationObserver){var e=new MutationObserver(function(t){z.update()});e.observe(s[0],{childList:!0,subtree:!0,characterData:!0,attributes:!0})}}function r(){z.update()}function u(e){var o=e&&e.originalEvent||e||t.event;1===o.touches.length&&(e.stopPropagation(),h(o.touches[0]))}function h(t){b.addClass("scroll-no-select"),s.addClass("scroll-no-select"),z.options.alwaysVisible||k.addClass("visible"),C=R?t.pageX:t.pageY,z.thumbPosition=parseInt(x.css(A),10)||0,M&&(g.on("touchmove",v),g.on("touchend",d)),g.on("mousemove",m),g.on("mouseup",d),x.on("mouseup",d)}function p(o){if(!(z.contentRatio>=1)){z.options.alwaysVisible||(w&&e.cancel(w),k.addClass("visible"),w=e(function(){k.removeClass("visible")},100));var i=o&&o.originalEvent||o||t.event,n=z.options.axis.toUpperCase(),a={X:i.deltaX,Y:i.deltaY},c=0==i.deltaMode?z.options.wheelSpeed:1;z.options.scrollInvert&&(c*=-1),"mousewheel"===E&&(a.Y=-1*i.wheelDelta/40,i.wheelDeltaX&&(a.X=-1*i.wheelDeltaX/40)),a.X*=-1/c,a.Y*=-1/c;var r=a[n];z.contentPosition-=r*z.options.wheelSpeed,z.contentPosition=Math.min(z.contentSize-z.viewportSize,Math.max(0,z.contentPosition)),s[0].dispatchEvent(D),l(),x.css(A,z.contentPosition/z.trackRatio+"px"),y.css(A,-z.contentPosition+"px"),(z.options.wheelLock||z.contentPosition!==z.contentSize-z.viewportSize&&0!==z.contentPosition)&&i.preventDefault()}}function v(e){var o=e&&e.originalEvent||e||t.event;1===o.touches.length&&(e.preventDefault(),m(o.touches[0]))}function m(t){if(!(z.contentRatio>=1)){var e=R?t.pageX:t.pageY,o=e-C;(z.options.scrollInvert&&"mousemove"===t.type||"mousemove"!==t.type&&!z.options.scrollInvert)&&(o=C-e);var i=Math.min(z.trackSize-z.thumbSize,Math.max(0,z.thumbPosition+o));z.contentPosition=i*z.trackRatio,s[0].dispatchEvent(D),l(),x.css(A,i+"px"),y.css(A,-z.contentPosition+"px")}}function d(){b.removeClass("scroll-no-select"),s.removeClass("scroll-no-select"),z.options.alwaysVisible||k.removeClass("visible"),g.off("mousemove",m),g.off("mouseup",d),x.off("mouseup",d),g.off("touchmove",v),g.off("ontouchend",d)}var f={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1,alwaysVisible:!0,autoUpdate:!1},S=a.scrollbar;S=S?o(S)(n):{},this.options=angular.extend({},f,S),this._defaults=f;var w,z=this,b=angular.element(document.querySelectorAll("body")[0]),g=angular.element(document),P=angular.element(s[0].querySelectorAll(".scroll-viewport")[0]),y=angular.element(s[0].querySelectorAll(".scroll-overview")[0]),k=angular.element(s[0].querySelectorAll(".scroll-bar")[0]),x=angular.element(s[0].querySelectorAll(".scroll-thumb")[0]),C=0,R="x"===this.options.axis,M="ontouchstart"in t,E="onwheel"in document?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",V=R?"width":"height",X=V.charAt(0).toUpperCase()+V.slice(1).toLowerCase(),A=R?"left":"top",D=document.createEvent("HTMLEvents");D.initEvent("move",!0,!0),this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.initialize=function(){return this.options.alwaysVisible||k.css("opacity",0),z.update(),c(),z},this.update=function(t){if(this.viewportSize=P.prop("offset"+X),this.contentSize=y.prop("scroll"+X),this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(0,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize,C=k.prop("offsetTop"),k.toggleClass("disable",this.contentRatio>=1||isNaN(this.contentRatio)),!this.options.alwaysVisible&&this.contentRatio<1&&this.viewportSize>0&&i.addClass(k,"visible").then(function(){i.removeClass(k,"visible"),n.$digest()}),null!=t)switch(t){case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;default:this.contentPosition=parseInt(t,10)||0}return l(),x.css(A,z.contentPosition/z.trackRatio+"px"),k.css(V,z.trackSize+"px"),x.css(V,z.thumbSize+"px"),y.css(A,-z.contentPosition+"px"),this},this.cleanup=function(){P.off("touchstart",u),x.off("mousedown",h),k.off("mousedown",m),angular.element(t).off("resize",r),s.off(E,p),z.options.alwaysVisible=!0,d()}},link:function(e,o,i,n){var s=t.getComputedStyle(o[0]).getPropertyValue("position");"relative"!==s&&"absolute"!==s&&o.css("position","relative"),n.initialize(),o.on("$destroy",function(){n.cleanup()})}}}]);
//# sourceMappingURL=/maps/ng-tiny-scrollbar.js.map