!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n,i,o,s,l){function f(){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}function u(t){if(!h){h=!0;try{for(var l=t.__files_||t.target&&t.target.files,f=[],u=[],d=0;d<l.length;d++){var c=l.item(d);a(e,o,n,c,t)?f.push(c):u.push(c)}r(o,s,e,i,n,n.ngfChange||n.ngfSelect,f,u,t),0==f.length&&(t.target.value=f)}finally{h=!1}}}function d(i){n.ngfMultiple&&i.attr("multiple",o(n.ngfMultiple)(e)),o(n.ngfMultiple)(e)||i.attr("multiple",void 0),n.accept&&i.attr("accept",n.accept),n.ngfCapture&&i.attr("capture",o(n.ngfCapture)(e));for(var r=0;r<t[0].attributes.length;r++){var a=t[0].attributes[r];(f()&&"type"!==a.name||"type"!==a.name&&"class"!==a.name&&"id"!==a.name&&"style"!==a.name)&&i.attr(a.name,a.value)}}function c(n){if(!t.attr("disabled")){var i=angular.element('<input type="file">');return d(i),f()?(t.replaceWith(i),t=i,i.attr("__ngf_gen__",!0),l(t)(e)):(i.css("visibility","hidden").css("position","absolute").css("width","1").css("height","1").css("z-index","-100000").attr("tabindex","-1"),t.__ngf_ref_elem__&&t.__ngf_ref_elem__.remove(),t.__ngf_ref_elem__=i,document.body.appendChild(i[0])),i}}function p(t){r(o,s,e,i,n,n.ngfChange||n.ngfSelect,[],[],t,!0)}function g(e){function n(e){null!=e&&i[0].click(),f()&&t.bind("click touchend",g)}null!=e&&(e.preventDefault(),e.stopPropagation());var i=c(e);return i&&(i.bind("change",u),e&&p(e),navigator.userAgent.toLowerCase().match(/android/)?setTimeout(function(){n(e)},0):n(e)),!1}if(!t.attr("__ngf_gen__")){var h=!1;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(t,c,d,u,p):(g(),f()||t.bind("click touchend",g))}}function n(e,t,n,o,s,l,f){function u(e,t,n){var i=!0,r=n.dataTransfer.items;if(null!=r)for(var o=0;o<r.length&&i;o++)i=i&&("file"==r[o].kind||""==r[o].kind)&&a(e,s,t,r[o],n);var l=s(t.ngfDragOverClass)(e,{$event:n});return l&&(l.delay&&(_=l.delay),l.accept&&(l=i?l.accept:l.reject)),l||t.ngfDragOverClass||"dragover"}function d(t,i,r,o){function u(i){a(e,s,n,i,t)?c.push(i):p.push(i)}function d(e,t,n){if(null!=t)if(t.isDirectory){var i=(n||"")+t.name;u({name:t.name,type:"directory",path:i});var r=t.createReader(),a=[];h++;var o=function(){r.readEntries(function(i){try{if(i.length)a=a.concat(Array.prototype.slice.call(i||[],0)),o();else{for(var r=0;r<a.length;r++)d(e,a[r],(n?n:"")+t.name+"/");h--}}catch(s){h--,console.error(s)}},function(){h--})};o()}else h++,t.file(function(e){try{h--,e.path=(n?n:"")+e.name,u(e)}catch(t){h--,console.error(t)}},function(){h--})}var c=[],p=[],g=t.dataTransfer.items,h=0;if(g&&g.length>0&&"file"!=f.protocol())for(var _=0;_<g.length;_++){if(g[_].webkitGetAsEntry&&g[_].webkitGetAsEntry()&&g[_].webkitGetAsEntry().isDirectory){var v=g[_].webkitGetAsEntry();if(v.isDirectory&&!r)continue;null!=v&&d(c,v)}else{var m=g[_].getAsFile();null!=m&&u(m)}if(!o&&c.length>0)break}else{var w=t.dataTransfer.files;if(null!=w)for(var _=0;_<w.length&&(u(w.item(_)),o||!(c.length>0));_++);}var y=0;!function A(e){l(function(){if(h)10*y++<2e4&&A(10);else{if(!o&&c.length>1){for(_=0;"directory"==c[_].type;)_++;c=[c[_]]}i(c,p)}},e||0)}()}var c=i();if(n.dropAvailable&&l(function(){e[n.dropAvailable]?e[n.dropAvailable].value=c:e[n.dropAvailable]=c}),!c)return void(1==s(n.ngfHideOnDropNotAvailable)(e)&&t.css("display","none"));{var p,g=null,h=s(n.ngfStopPropagation),_=1;s(n.ngfAccept)}t[0].addEventListener("dragover",function(i){if(!t.attr("disabled")){if(i.preventDefault(),h(e)&&i.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=i.dataTransfer.effectAllowed;i.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}l.cancel(g),e.actualDragOverClass||(p=u(e,n,i)),t.addClass(p)}},!1),t[0].addEventListener("dragenter",function(n){t.attr("disabled")||(n.preventDefault(),h(e)&&n.stopPropagation())},!1),t[0].addEventListener("dragleave",function(){t.attr("disabled")||(g=l(function(){t.removeClass(p),p=null},_||1))},!1),t[0].addEventListener("drop",function(i){t.attr("disabled")||(i.preventDefault(),h(e)&&i.stopPropagation(),t.removeClass(p),p=null,d(i,function(t,a){r(s,l,e,o,n,n.ngfChange||n.ngfDrop,t,a,i)},0!=s(n.ngfAllowDir)(e),n.multiple||s(n.ngfMultiple)(e)))},!1)}function i(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}function r(e,t,n,i,r,a,o,s,l,f){function u(){i&&(e(r.ngModel).assign(n,o),t(function(){i&&i.$setViewValue(null!=o&&0==o.length?null:o)})),r.ngModelRejected&&e(r.ngModelRejected).assign(n,s),a&&e(a)(n,{$files:o,$rejectedFiles:s,$event:l})}f?u():t(function(){u()})}function a(e,t,n,i,r){var a=t(n.ngfAccept)(e,{$file:i,$event:r}),s=t(n.ngfMaxSize)(e,{$file:i,$event:r})||9007199254740991,l=t(n.ngfMinSize)(e,{$file:i,$event:r})||-1;if(null!=a&&angular.isString(a)){var f=new RegExp(o(a),"gi");a=null!=i.type&&f.test(i.type.toLowerCase())||null!=i.name&&f.test(i.name.toLowerCase())}return(null==a||a)&&(null==i.size||i.size<s&&i.size>l)}function o(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var t=e.split(","),n="";if(t.length>1)for(var i=0;i<t.length;i++)n+="("+o(t[i])+")",i<t.length-1&&(n+="|");else 0==e.indexOf(".")&&(e="*"+e),n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,".");return n}var s;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&e("setRequestHeader",function(e){return function(t,n){if("__setXHR_"===t){var i=n(this);i instanceof Function&&i(this)}else e.apply(this,arguments)}});var l=angular.module("ngFileUpload",[]);l.version="4.2.4",l.service("Upload",["$http","$q","$timeout",function(e,t,n){function i(i){i.method=i.method||"POST",i.headers=i.headers||{},i.transformRequest=i.transformRequest||function(t,n){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:e.defaults.transformRequest[0](t,n)};var r=t.defer(),a=r.promise;return i.headers.__setXHR_=function(){return function(e){e&&(i.__XHR=e,i.xhrFn&&i.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=i,r.notify?r.notify(e):a.progress_fn&&n(function(){a.progress_fn(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=i,r.notify?r.notify(e):a.progress_fn&&n(function(){a.progress_fn(e)}))},!1))}},e(i).then(function(e){r.resolve(e)},function(e){r.reject(e)},function(e){r.notify(e)}),a.success=function(e){return a.then(function(t){e(t.data,t.status,t.headers,i)}),a},a.error=function(e){return a.then(null,function(t){e(t.data,t.status,t.headers,i)}),a},a.progress=function(e){return a.progress_fn=e,a.then(null,null,function(t){e(t)}),a},a.abort=function(){return i.__XHR&&n(function(){i.__XHR.abort()}),a},a.xhr=function(e){return i.xhrFn=function(t){return function(){t&&t.apply(a,arguments),e.apply(a,arguments)}}(i.xhrFn),a},a}this.upload=function(e){return e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n=new FormData,i={};for(s in e.fields)e.fields.hasOwnProperty(s)&&(i[s]=e.fields[s]);if(t&&(i.data=t),e.formDataAppender)for(s in i)i.hasOwnProperty(s)&&e.formDataAppender(n,s,i[s]);else for(s in i)if(i.hasOwnProperty(s)){var r=i[s];void 0!==r&&(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r)?n.append(s,r):e.sendObjectsAsJsonBlob&&angular.isObject(r)?n.append(s,new Blob([r],{type:"application/json"})):n.append(s,JSON.stringify(r)))}if(null!=e.file){var a=e.fileFormDataName||"file";if(angular.isArray(e.file))for(var o=angular.isString(a),l=0;l<e.file.length;l++)n.append(o?a:a[l],e.file[l],e.fileName&&e.fileName[l]||e.file[l].name);else n.append(a,e.file,e.fileName||e.file.name)}return n}),i(e)},this.http=function(e){return i(e)}}]),l.directive("ngfSelect",["$parse","$timeout","$compile",function(e,n,i){return{restrict:"AEC",require:"?ngModel",link:function(r,a,o,s){t(r,a,o,s,e,n,i)}}}]),l.directive("ngfDrop",["$parse","$timeout","$location",function(e,t,i){return{restrict:"AEC",require:"?ngModel",link:function(r,a,o,s){n(r,a,o,s,e,t,i)}}}]),l.directive("ngfNoFileDrop",function(){return function(e,t){i()&&t.css("display","none")}}),l.directive("ngfDropAvailable",["$parse","$timeout",function(e,t){return function(n,r,a){if(i()){var o=e(a.ngfDropAvailable);t(function(){o(n),o.assign&&o.assign(n,!0)})}}}]),l.directive("ngfSrc",["$parse","$timeout",function(e,t){return{restrict:"AE",link:function(n,i,r,o){window.FileReader&&n.$watch(r.ngfSrc,function(o){o&&a(n,e,r,o,null)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||o.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||o.size<4e6)?t(function(){var e=window.URL||window.webkitURL;if(e&&e.createObjectURL)i.attr("src",e.createObjectURL(o));else{var n=new FileReader;n.readAsDataURL(o),n.onload=function(e){t(function(){i.attr("src",e.target.result)})}}}):i.attr("src",r.ngfDefaultSrc||"")})}}}])}(),function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(i){}}function n(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}var i=function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(t){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var r=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,i,r){e.__listeners[n]=i,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,n,i){r(this),this.__url=n;try{e.apply(this,[t,n,i])}catch(a){a.message.indexOf("Access is denied")>-1&&(this.__origError=a,e.apply(this,[t,"_fix_for_ie_crossdomain__",i]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,n){if("__setXHR_"===t){r(this);var i=n(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=n,e.apply(this,arguments)}}),e("send",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var r=arguments[0],a={url:n.__url,jsonp:!1,cache:!0,complete:function(e,i){n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===e&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==i.status&&t(n,"status",function(){return 0==i.status&&e&&"abort"!==e?500:i.status}),void 0!==i.statusText&&t(n,"statusText",function(){return i.statusText}),t(n,"readyState",function(){return 4}),void 0!==i.response&&t(n,"response",function(){return i.response});var r=i.responseText||(e&&0==i.status&&"abort"!==e?e:void 0);t(n,"responseText",function(){return r}),t(n,"response",function(){return r}),e&&t(n,"err",function(){return e}),n.__fileApiXHR=i,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};a.data={},a.files={};for(var o=0;o<r.data.length;o++){var s=r.data[o];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?a.files[s.key]=s.val:a.data[s.key]=s.val}setTimeout(function(){if(!i())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(a)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var e,t,n,r,a,o=document.createElement("script"),s=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)e=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)t=window.FileAPI.jsPath;else for(n=0;n<s.length;n++)if(a=s[n].src,r=a.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),r>-1){t=a.substring(0,r+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=t),o.setAttribute("src",e||t+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(o),FileAPI.hasFlash=i()}}(),FileAPI.ngfFixIE=function(e,t,r,a,o){if(!i())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var s=function(i){function o(e){var t,n;if(t=n=0,e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{left:t,top:n}}if(e.attr("disabled"))e.__ngf_elem__.removeClass("js-fileapi-wrapper");else{var f=e.__ngf_elem__;f?r(e.__ngf_elem__):(f=e.__ngf_elem__=t(),f.addClass("js-fileapi-wrapper"),!n(e),setTimeout(function(){f.bind("mouseenter",s)},10),f.bind("change",function(e){l.apply(this,[e]),a.apply(this,[e])})),n(e)||f.css("position","absolute").css("top",o(e[0]).top+"px").css("left",o(e[0]).left+"px").css("width",e[0].offsetWidth+"px").css("height",e[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",e.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible")}};e.bind("mouseenter",s);var l=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),void 0===t[n].name&&(t[n].name="file"),void 0===t[n].type&&(t[n].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!=t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var i=0;i<n.length;i++)n[i].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var i={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(i.target.result=n.result),i},i=function(i){if(t||(t=!0,e.onloadstart&&e.onloadstart(n("loadstart",i))),"load"===i.type){e.onloadend&&e.onloadend(n("loadend",i));var r=n("load",i);e.onload&&e.onload(r),e.dispatchEvent(r)}else if("progress"===i.type){var r=n("progress",i);e.onprogress&&e.onprogress(r),e.dispatchEvent(r)}else{var r=n("error",i);e.onerror&&e.onerror(r),e.dispatchEvent(r)}};this.readAsArrayBuffer=function(e){FileAPI.readAsBinaryString(e,i)},this.readAsBinaryString=function(e){FileAPI.readAsBinaryString(e,i)},this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,i)},this.readAsText=function(e){FileAPI.readAsText(e,i)}})}();
//# sourceMappingURL=/maps/angular-file-upload.js.map