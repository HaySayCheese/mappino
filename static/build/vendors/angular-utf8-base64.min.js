"use strict";angular.module("ab-base64",[]).constant("base64",function(){var e={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",lookup:null,ie:/MSIE /.test(navigator.userAgent),ieo:/MSIE [67]/.test(navigator.userAgent),encode:function(r){var t,o,a,n,h=e.toUtf8(r),c=-1,i=h.length,l=[,,,];if(e.ie){for(t=[];++c<i;)o=h[c],a=h[++c],l[0]=o>>2,l[1]=(3&o)<<4|a>>4,isNaN(a)?l[2]=l[3]=64:(n=h[++c],l[2]=(15&a)<<2|n>>6,l[3]=isNaN(n)?64:63&n),t.push(e.alphabet.charAt(l[0]),e.alphabet.charAt(l[1]),e.alphabet.charAt(l[2]),e.alphabet.charAt(l[3]));return t.join("")}for(t="";++c<i;)o=h[c],a=h[++c],l[0]=o>>2,l[1]=(3&o)<<4|a>>4,isNaN(a)?l[2]=l[3]=64:(n=h[++c],l[2]=(15&a)<<2|n>>6,l[3]=isNaN(n)?64:63&n),t+=e.alphabet[l[0]]+e.alphabet[l[1]]+e.alphabet[l[2]]+e.alphabet[l[3]];return t},decode:function(r){if(r=r.replace(/\s/g,""),r.length%4)throw new Error("InvalidLengthError: decode failed: The string to be decoded is not the correct length for a base64 encoded string.");if(/[^A-Za-z0-9+\/=\s]/g.test(r))throw new Error("InvalidCharacterError: decode failed: The string contains characters invalid in a base64 encoded string.");var t,o=e.fromUtf8(r),a=0,n=o.length;if(e.ieo){for(t=[];n>a;)t.push(String.fromCharCode(o[a]<128?o[a++]:o[a]>191&&o[a]<224?(31&o[a++])<<6|63&o[a++]:(15&o[a++])<<12|(63&o[a++])<<6|63&o[a++]));return t.join("")}for(t="";n>a;)t+=String.fromCharCode(o[a]<128?o[a++]:o[a]>191&&o[a]<224?(31&o[a++])<<6|63&o[a++]:(15&o[a++])<<12|(63&o[a++])<<6|63&o[a++]);return t},toUtf8:function(e){var r,t=-1,o=e.length,a=[];if(/^[\x00-\x7f]*$/.test(e))for(;++t<o;)a.push(e.charCodeAt(t));else for(;++t<o;)r=e.charCodeAt(t),128>r?a.push(r):2048>r?a.push(r>>6|192,63&r|128):a.push(r>>12|224,r>>6&63|128,63&r|128);return a},fromUtf8:function(r){var t,o=-1,a=[],n=[,,,];if(!e.lookup){for(t=e.alphabet.length,e.lookup={};++o<t;)e.lookup[e.alphabet.charAt(o)]=o;o=-1}for(t=r.length;++o<t&&(n[0]=e.lookup[r.charAt(o)],n[1]=e.lookup[r.charAt(++o)],a.push(n[0]<<2|n[1]>>4),n[2]=e.lookup[r.charAt(++o)],64!==n[2])&&(a.push((15&n[1])<<4|n[2]>>2),n[3]=e.lookup[r.charAt(++o)],64!==n[3]);)a.push((3&n[2])<<6|n[3]);return a}},r={decode:function(r){r=r.replace(/-/g,"+").replace(/_/g,"/");var t=r.length%4;if(t){if(1===t)throw new Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");r+=new Array(5-t).join("=")}return e.decode(r)},encode:function(r){var t=e.encode(r);return t.replace(/\+/g,"-").replace(/\//g,"_").split("=",1)[0]}};return{decode:e.decode,encode:e.encode,urldecode:r.decode,urlencode:r.encode}}());