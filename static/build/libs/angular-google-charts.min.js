!function(t,r,e){e.module("googlechart",[]).value("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}}).provider("googleJsapiUrl",function(){var t="https:",r="//www.google.com/jsapi";this.setProtocol=function(r){t=r},this.setUrl=function(t){r=t},this.$get=function(){return(t?t:"")+r}}).factory("googleChartApiPromise",["$rootScope","$q","googleChartApiConfig","googleJsapiUrl",function(a,o,n,i){var c=o.defer(),l=function(){var t={callback:function(){var t=n.optionalSettings.callback;a.$apply(function(){c.resolve()}),e.isFunction(t)&&t.call(this)}},t=e.extend({},n.optionalSettings,t);r.google.load("visualization",n.version,t)};o=t.getElementsByTagName("head")[0];var s=t.createElement("script");return s.setAttribute("type","text/javascript"),s.src=i,s.addEventListener?s.addEventListener("load",l,!1):s.onreadystatechange=function(){("loaded"===s.readyState||"complete"===s.readyState)&&(s.onreadystatechange=null,l())},o.appendChild(s),c.promise}]).directive("googleChart",["$timeout","$window","$rootScope","googleChartApiPromise",function(t,r,a,o){return{restrict:"A",scope:{beforeDraw:"&",chart:"=chart",onReady:"&",onSelect:"&",select:"&"},link:function(r,n,i){function c(t,a,o){if("undefined"!=typeof r.chart.formatters[t]){if(!e.equals(r.chart.formatters[t],r.oldChartFormatters[t]))if(r.oldChartFormatters[t]=r.chart.formatters[t],r.formatters[t]=[],"color"===t)for(var n=0;n<r.chart.formatters[t].length;n++){for(var i=new a,c=0;c<r.chart.formatters[t][n].formats.length;c++){var l=r.chart.formatters[t][n].formats[c];"undefined"!=typeof l.fromBgColor&&"undefined"!=typeof l.toBgColor?i.addGradientRange(l.from,l.to,l.color,l.fromBgColor,l.toBgColor):i.addRange(l.from,l.to,l.color,l.bgcolor)}r.formatters[t].push(i)}else for(var c=0;c<r.chart.formatters[t].length;c++)r.formatters[t].push(new a(r.chart.formatters[t][c]));for(c=0;c<r.formatters[t].length;c++)r.chart.formatters[t][c].columnNum<o.getNumberOfColumns()&&r.formatters[t][c].format(o,r.chart.formatters[t][c].columnNum);("arrow"===t||"bar"===t||"color"===t)&&(r.chart.options.allowHtml=!0)}}function l(){l.triggered||void 0==r.chart||(l.triggered=!0,t(function(){"undefined"==typeof r.chartWrapper?(r.chartWrapper=new google.visualization.ChartWrapper({chartType:r.chart.type,dataTable:r.chart.data,view:r.chart.view,options:r.chart.options,containerId:n[0]}),google.visualization.events.addListener(r.chartWrapper,"ready",function(){r.chart.displayed=!0,r.$apply(function(t){t.onReady({chartWrapper:t.chartWrapper})})}),google.visualization.events.addListener(r.chartWrapper,"error",function(t){console.log("Chart not displayed due to error: "+t.message+". Full error object follows."),console.log(t)}),google.visualization.events.addListener(r.chartWrapper,"select",function(){var t=r.chartWrapper.getChart().getSelection()[0];r.$apply(function(){i.select?(console.log("Angular-Google-Chart: The 'select' attribute is deprecated and will be removed in a future release.  Please use 'onSelect'."),r.select({selectedItem:t})):r.onSelect({selectedItem:t})})})):(r.chartWrapper.setChartType(r.chart.type),r.chartWrapper.setDataTable(r.chart.data),r.chartWrapper.setView(r.chart.view),r.chartWrapper.setOptions(r.chart.options)),"undefined"==typeof r.formatters&&(r.formatters={}),"undefined"!=typeof r.chart.formatters&&(c("number",google.visualization.NumberFormat,r.chartWrapper.getDataTable()),c("arrow",google.visualization.ArrowFormat,r.chartWrapper.getDataTable()),c("date",google.visualization.DateFormat,r.chartWrapper.getDataTable()),c("bar",google.visualization.BarFormat,r.chartWrapper.getDataTable()),c("color",google.visualization.ColorFormat,r.chartWrapper.getDataTable()));var e=r.chart.customFormatters;if("undefined"!=typeof e)for(var a in e)c(a,e[a],r.chartWrapper.getDataTable());t(function(){r.beforeDraw({chartWrapper:r.chartWrapper}),r.chartWrapper.draw(),l.triggered=!1})},0,!0))}function s(){o.then(function(){l()})}r.$watch(function(){return r.chart?{data:r.chart.data,formatters:r.chart.formatters,options:r.chart.options,type:r.chart.type,customFormatters:r.chart.customFormatters}:r.chart},function(){s()},!0);var p=a.$on("resizeMsg",function(){t(function(){r.chartWrapper&&s()})});r.$on("$destroy",function(){p()}),r.oldChartFormatters={}}}}]).run(["$rootScope","$window",function(t,r){e.element(r).bind("resize",function(){t.$emit("resizeMsg")})}])}(document,window,window.angular);