<div class="modal publication-view-modal fade" ng-controller="PublicationViewController">
    <div class="modal-dialog -white">
        <div class="modal-content">

            <div class="modal-header publication-view-header">
                <a href="#" class="publication-close" data-dismiss="modal" role="button">
                    <span class="glyphicon glyphicon-remove"></span>
                </a>
                <a ng-href class="add-to-bookmark" role="button" ng-class="{ 'added': publication.added_to_favorites }">
                    <span class="glyphicon"
                          ng-class="{ 'glyphicon-star': publication.added_to_favorites, 'glyphicon-star-empty': !publication.added_to_favorites }"
                          ng-click="toggleFavorite($event)"></span>
                </a>

                <div id="publication-slider" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="item title-photo active">
                            <img ng-src="[[ publication.photos[0] ]]" alt=""/>
                            <div class="photo-overlay"></div>
                        </div>
                        <div class="item" ng-repeat="photo in publication.photos">
                            <img ng-src="[[ photo ]]" alt=""/>
                            <div class="photo-overlay"></div>
                        </div>
                    </div>

                    <a ng-href class="slider-resize to-full" role="button" ng-click="toggleSlider()">
                        <span class="glyphicon glyphicon-fullscreen"></span>
                    </a>
                    <a ng-href class="slider-resize to-small" role="button" ng-click="toggleSlider()">
                        <span class="glyphicon glyphicon-resize-small"></span>
                    </a>

                    <a ng-href class="left carousel-control" href="#publication-slider" role="button" data-slide="prev"
                       ng-click="$event.preventDefault()">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    </a>
                    <a ng-href class="right carousel-control" href="#publication-slider" role="button" data-slide="next"
                       ng-click="$event.preventDefault()">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    </a>
                </div>

                <div class="over-photo-block">
                    <div class="title">[[ publication.title ]]</div>
                    <div class="address">[[ publication.address ]]</div>
                </div>
            </div>



            <div class="modal-body publication-view-body">
                <div class="tabs">
                    <ul class="tabs-list">
                        <li class="tab -blue" ng-click="publicationDetailedPart = 'Description'"
                            ng-class="{ active: publicationDetailedPart === 'Description' }">
                            Описание
                        </li>
                        <li class="tab -green" ng-click="publicationDetailedPart = 'Contacts'"
                            ng-class="{ active: publicationDetailedPart === 'Contacts' }">
                            Контакты продавца
                        </li>
                        <li class="tab -violet" ng-click="publicationDetailedPart = 'Similar'"
                            ng-class="{ active: publicationDetailedPart === 'Similar' }">
                            Похожие объекты поблизости
                        </li>
                    </ul>

                    <a href="#" class="claim-on-publication" role="button"
                       ng-click="publicationDetailedPart = 'Claim'; $event.preventDefault()"
                       ng-class="{ active: publicationDetailedPart === 'Claim' }">
                        <span>Пожаловатся</span>
                    </a>
                </div>

                <div class="body-view" ng-switch on="publicationDetailedPart">
                    <div ng-switch-when="Description">
                        <div class="publication-loading" ng-hide="publicationLoaded"></div>

                        <div class="row">
                            <div class="col-xs-8">
                                <div class="text-property" ng-show="publication.description">
                                    [[ publication.description ]]
                                </div>
                                <div class="text-property price-property" ng-show="publication.sale_price">
                                    <span>Продажа:</span>
                                    <span class="price">[[ publication.sale_price ]]</span>
                                </div>
                                <div class="text-property" ng-show="publication.sale_terms">
                                    [[ publication.sale_terms ]]
                                </div>
                                <div class="text-property price-property" ng-show="publication.rent_price">
                                    <span>Аренда:</span>
                                    <span class="price">[[ publication.rent_price ]]</span>
                                </div>
                                <div class="text-property" ng-show="publication.rent_terms">
                                    [[ publication.rent_terms ]]
                                </div>
                                <div class="text-property" ng-show="publication.facilities">
                                    <span>Удобства:</span> [[ publication.facilities ]]
                                </div>
                                <div class="text-property" ng-show="publication.rent_facilities">
                                    <span>Удобства аренды:</span> [[ publication.rent_facilities ]]
                                </div>
                                <div class="text-property" ng-show="publication.communications">
                                    <span>Коммуникации:</span> [[ publication.communications ]]
                                </div>
                                <div class="text-property" ng-show="publication.buildings">
                                    <span>Дополнительные постройки:</span> [[ publication.buildings ]]
                                </div>
                            </div>

                            <div class="col-xs-4">
                                <ul class="properties-list">
                                    <li ng-show="publication.market_type">
                                        <span>Тип рынка:</span> [[ publication.market_type ]]
                                    </li>
                                    <li ng-show="publication.building_type">
                                        <span>Тип здания:</span> [[ publication.building_type ]]
                                    </li>
                                    <li ng-show="publication.build_year">
                                        <span>Год постройки:</span> [[ publication.build_year ]]
                                    </li>
                                    <li ng-show="publication.age">
                                        <span>Возраст бизнеса:</span> [[ publication.age ]]
                                    </li>
                                    <li ng-show="publication.flat_type">
                                        <span>Тип квартиры:</span> [[ publication.flat_type ]]
                                    </li>
                                    <li ng-show="publication.rooms_planning">
                                        <span>Планировка:</span> [[ publication.rooms_planning ]]
                                    </li>
                                    <li ng-show="publication.total_area">
                                        <span>Общая площадь:</span> [[ publication.total_area ]]
                                    </li>
                                    <li ng-show="publication.area">
                                        <span>Площадь:</span> [[ publication.area ]]
                                    </li>
                                    <li ng-show="publication.living_area">
                                        <span>Жилая площадь:</span> [[ publication.living_area ]]
                                    </li>
                                    <li ng-show="publication.kitchen_area">
                                        <span>Площадь кухни:</span> [[ publication.kitchen_area ]]
                                    </li>
                                    <li ng-show="publication.halls_area">
                                        <span>Площадь залов:</span> [[ publication.halls_area ]]
                                    </li>
                                    <li ng-show="publication.plot_area">
                                        <span>Площадь участка:</span> [[ publication.plot_area ]]
                                    </li>
                                    <li ng-show="publication.driveways">
                                        <span>Подъездные пути:</span> [[ publication.driveways ]]
                                    </li>
                                    <li ng-show="publication.share">
                                        <span>Долевое участие:</span> [[ publication.share ]]
                                    </li>
                                    <li ng-show="publication.floor">
                                        <span>Этаж:</span> [[ publication.floor ]]
                                    </li>
                                    <li ng-show="publication.floors_count">
                                        <span>Этажей:</span> [[ publication.floors_count ]]
                                    </li>
                                    <li ng-show="publication.condition">
                                        <span>Состояние:</span> [[ publication.condition ]]
                                    </li>
                                    <li ng-show="publication.monthly_cost">
                                        <span>Расходы / мес.:</span> [[ publication.monthly_cost ]]
                                    </li>
                                    <li ng-show="publication.annual_receipts">
                                        <span>Год. выручка:</span> [[ publication.annual_receipts ]]
                                    </li>
                                    <li ng-show="publication.rooms_count">
                                        <span>Кол-во комнат:</span> [[ publication.rooms_count ]]
                                    </li>
                                    <li ng-show="publication.bedrooms_count">
                                        <span>Кол-во спален:</span> [[ publication.bedrooms_count ]]
                                    </li>
                                    <li ng-show="publication.halls_count">
                                        <span>Кол-во залов:</span> [[ publication.halls_count ]]
                                    </li>
                                    <li ng-show="publication.vcs_count">
                                        <span>Кол-во сан. узлов:</span> [[ publication.vcs_count ]]
                                    </li>
                                    <li ng-show="publication.balconies_count">
                                        <span>Кол-во балконов:</span> [[ publication.balconies_count ]]
                                    </li>
                                    <li ng-show="publication.loggias_count">
                                        <span>Кол-во лоджий:</span> [[ publication.loggias_count ]]
                                    </li>
                                    <li ng-show="publication.cabinets_count">
                                        <span>Кол-во кабинетов:</span> [[ publication.cabinets_count ]]
                                    </li>
                                    <li ng-show="publication.ceiling_height">
                                        <span>Высота потолков:</span> [[ publication.ceiling_height ]]
                                    </li>
                                    <li ng-show="publication.workers_count">
                                        <span>Работников:</span> [[ publication.workers_count ]]
                                    </li>
                                    <li ng-show="publication.pit">
                                        <span>Яма:</span> [[ publication.pit ]]
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div ng-switch-when="Contacts" ng-controller="PublicationViewContactsController">
                        <div class="contacts-loading" ng-hide="contactsLoaded"></div>

                        <div class="row">
                            <div class="col-xs-4">
                                <div class="seller-photo" ng-show="contactsLoaded">
                                    <img ng-src="[[ seller.contacts.avatar_url ]]" ng-show="seller.contacts.avatar_url"/>
                                    <img src="{{ static }}build/images/main/publication-view/no-user.png" ng-hide="seller.contacts.avatar_url"/>
                                </div>
                            </div>

                            <div class="col-xs-4">
                                <div class="seller-name">
                                    [[ seller.contacts.first_name ]] [[ seller.contacts.last_name ]]
                                </div>
                                <div class="seller-phones">
                                    <div ng-show="seller.contacts.mobile_phone || seller.contacts.add_mobile_phone">
                                        <span ng-show="seller.contacts.mobile_phone">
                                            <b>Моб. телефон:</b> [[ seller.contacts.mobile_phone ]]
                                        </span>
                                        <span ng-show="seller.contacts.mobile_phone && seller.contacts.add_mobile_phone">,</span>
                                        <span ng-show="seller.contacts.add_mobile_phone">
                                            <span ng-hide="seller.contacts.mobile_phone">
                                                <b>Моб. телефон:</b>
                                            </span>
                                            [[ seller.contacts.add_mobile_phone ]]
                                        </span>
                                    </div>
                                    <div ng-show="seller.contacts.landline_phone || seller.contacts.add_landline_phone">
                                        <span ng-show="seller.contacts.landline_phone">
                                            <b>Роб. телефон:</b> [[ seller.contacts.landline_phone ]]
                                        </span>
                                        <span ng-show="seller.contacts.landline_phone && seller.contacts.add_landline_phone">,</span>
                                        <span ng-show="seller.contacts.add_landline_phone">
                                            <span ng-hide="seller.contacts.landline_phone">
                                                <b>Роб. телефон:</b>
                                            </span>
                                            [[ seller.contacts.add_landline_phone ]]
                                        </span>
                                    </div>
                                    <div ng-show="seller.contacts.email">
                                        <b>Эл. почта:</b> [[ seller.contacts.email ]]
                                    </div>
                                    <div ng-show="seller.contacts.skype">
                                        <b>Skype:</b> [[ seller.contacts.skype ]]
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-4">
                                <div class="seller-buttons" ng-hide="seller.sendingMessage || seller.sendingCallRequest">
                                    <div class="btn -blue -block" ng-show="seller.preferences.allow_call_requests"
                                         ng-click="seller.sendingCallRequest = true">Заказать обратный звонок
                                    </div>
                                    <div class="btn -gray -block" ng-show="seller.preferences.allow_messaging"
                                         ng-click="seller.sendingMessage = true">Оставить сообщение
                                    </div>
                                </div>



                                <div class="seller-call-request" ng-show="seller.sendingCallRequest">
                                    <div class="row form-group">
                                        <div class="col-xs-12">
                                            <input type="text" class="form-control" placeholder="Имя"
                                                   ng-model="seller.call_request.name">
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-xs-12">
                                            <input type="text" class="form-control" placeholder="Телефон"
                                                   ng-model="seller.call_request.phone_number" allow-only-number>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="btn -gray pull-left" ng-click="cancelSendCallRequest()">Отмена</div>
                                            <div class="btn -blue pull-right send-btn" ng-click="sendCallRequest()"
                                                 data-loading-text="Отправка данных..."
                                                 ng-disabled="!seller.call_request.name || !seller.call_request.phone_number">Заказать обратный звонок
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="seller-message" ng-show="seller.sendingMessage">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="row form-group">
                                                <div class="col-xs-5">
                                                    <input type="text" class="form-control" placeholder="Имя"
                                                           ng-model="seller.message.name">
                                                </div>
                                                <div class="col-xs-7">
                                                    <input type="text" class="form-control" placeholder="Эл. почта"
                                                           ng-model="seller.message.email">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-xs-12">
                                            <textarea class="form-control" rows="2" placeholder="Введите текст сообщения"
                                                      ng-model="seller.message.message"></textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="btn -gray pull-left" ng-click="cancelSendMessage()">Отмена</div>
                                            <div class="btn -blue pull-right send-btn" ng-click="sendMessage()"
                                                 data-loading-text="Отправка данных..."
                                                 ng-disabled="!seller.message.message || !seller.message.email">Отправить сообщение
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-switch-when="Similar" ng-controller="PublicationViewSimilarController">
                        <div class="row">
                            <div class="col-sm-6 col-md-4">
                                <a href="#" target="_blank" class="thumbnail">
                                    <img src="" alt="">
                                    <div class="caption">
                                        <h4>Thumbnail label</h4>
                                        <p>gsagagagas</p>
                                    </div>
                                </a>
                            </div>
                            <div class="col-sm-6 col-md-4">
                                <a href="#" target="_blank" class="thumbnail">
                                    <img src="" alt="">
                                    <div class="caption">
                                        <h4>Thumbnail label</h4>
                                        <p>gsagagagas</p>
                                    </div>
                                </a>
                            </div>
                            <div class="col-sm-6 col-md-4">
                                <a href="#" target="_blank" class="thumbnail">
                                    <img src="" alt="">
                                    <div class="caption">
                                        <h4>Thumbnail label</h4>
                                        <p>gsagagagas</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div ng-switch-when="Claim">
                        <div class="row">
                            <div class="col-xs-8 col-xs-offset-2">
                                <div class="row form-group">
                                    <div class="col-xs-12">
                                        <select selectpicker name="claim-selectpicker" data-width="100%" ng-model="claim.reason">
                                            <option value="1">Объявление от посредника</option>
                                            <option value="2">Объявление содержит неправдивый контент</option>
                                            <option value="3">Фото не соответствует действительности</option>
                                            <option value="0">Другая причина</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row form-group" ng-show="claim.reason === '0'">
                                    <div class="col-xs-12">
                                        <textarea class="form-control" name="another-reason" cols="30" rows="3"
                                                  ng-model="claim.reasonName"
                                                  placeholder="Пожалуйста, укажите причину жалобы, по возможности указав как можно больше деталей."></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-8">
                                        <input class="form-control" type="text" placeholder="Эл. почта" ng-model="claim.email"/>
                                    </div>
                                    <div class="col-xs-4 text-center">
                                        <button class="btn -green -block" ng-disabled="claimFieldsIsNull()">Отправить</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>